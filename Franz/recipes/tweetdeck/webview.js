'use strict';

const { ipcRenderer } = require('electron');

// Tweetdeck redirect fix
ipcRenderer.on('redirect-url', (event, url) => {
  window.location.assign(url);
});

module.exports = Franz => {
  const getMessages = function getMessages() {
    const elements = document.querySelectorAll('.msg-unread-count');
    let count = 0;
    if (elements[0]) {
      count = parseInt(elements[0].innerHTML, 10);
    }

    Franz.setBadge(count);
  };
  Franz.loop(getMessages);
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInR3ZWV0ZGVjay93ZWJ2aWV3LmpzIl0sIm5hbWVzIjpbImlwY1JlbmRlcmVyIiwicmVxdWlyZSIsIm9uIiwiZXZlbnQiLCJ1cmwiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImFzc2lnbiIsIm1vZHVsZSIsImV4cG9ydHMiLCJGcmFueiIsImdldE1lc3NhZ2VzIiwiZWxlbWVudHMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb3VudCIsInBhcnNlSW50IiwiaW5uZXJIVE1MIiwic2V0QmFkZ2UiLCJsb29wIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sRUFBRUEsV0FBRixLQUFrQkMsUUFBUSxVQUFSLENBQXhCOztBQUVBO0FBQ0FELFlBQVlFLEVBQVosQ0FBZSxjQUFmLEVBQStCLENBQUNDLEtBQUQsRUFBUUMsR0FBUixLQUFnQjtBQUM3Q0MsU0FBT0MsUUFBUCxDQUFnQkMsTUFBaEIsQ0FBdUJILEdBQXZCO0FBQ0QsQ0FGRDs7QUFJQUksT0FBT0MsT0FBUCxHQUFrQkMsS0FBRCxJQUFXO0FBQzFCLFFBQU1DLGNBQWMsU0FBU0EsV0FBVCxHQUF1QjtBQUN6QyxVQUFNQyxXQUFXQyxTQUFTQyxnQkFBVCxDQUEwQixtQkFBMUIsQ0FBakI7QUFDQSxRQUFJQyxRQUFRLENBQVo7QUFDQSxRQUFJSCxTQUFTLENBQVQsQ0FBSixFQUFpQjtBQUNmRyxjQUFRQyxTQUFTSixTQUFTLENBQVQsRUFBWUssU0FBckIsRUFBZ0MsRUFBaEMsQ0FBUjtBQUNEOztBQUVEUCxVQUFNUSxRQUFOLENBQWVILEtBQWY7QUFDRCxHQVJEO0FBU0FMLFFBQU1TLElBQU4sQ0FBV1IsV0FBWDtBQUNELENBWEQiLCJmaWxlIjoidHdlZXRkZWNrL3dlYnZpZXcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IGlwY1JlbmRlcmVyIH0gPSByZXF1aXJlKCdlbGVjdHJvbicpO1xuXG4vLyBUd2VldGRlY2sgcmVkaXJlY3QgZml4XG5pcGNSZW5kZXJlci5vbigncmVkaXJlY3QtdXJsJywgKGV2ZW50LCB1cmwpID0+IHtcbiAgd2luZG93LmxvY2F0aW9uLmFzc2lnbih1cmwpO1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gKEZyYW56KSA9PiB7XG4gIGNvbnN0IGdldE1lc3NhZ2VzID0gZnVuY3Rpb24gZ2V0TWVzc2FnZXMoKSB7XG4gICAgY29uc3QgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubXNnLXVucmVhZC1jb3VudCcpO1xuICAgIGxldCBjb3VudCA9IDA7XG4gICAgaWYgKGVsZW1lbnRzWzBdKSB7XG4gICAgICBjb3VudCA9IHBhcnNlSW50KGVsZW1lbnRzWzBdLmlubmVySFRNTCwgMTApO1xuICAgIH1cblxuICAgIEZyYW56LnNldEJhZGdlKGNvdW50KTtcbiAgfTtcbiAgRnJhbnoubG9vcChnZXRNZXNzYWdlcyk7XG59O1xuIl19